import{d as R,a as d,r as V,o as j,bZ as M,a0 as p,w as n,u as r,ad as O,h as U,i as q,n as w,bJ as J,j as b,at as h,f as l,e as D,t as c,bK as K,m as E,a1 as Z,bk as F,bL as G}from"./index.81696f1b.js";import{v as P}from"./el-loading.0782f44d.js";import{E as Q,a as W,_ as X}from"./el-table-column.d9c8f627.js";import"./el-select.b193cef2.js";import"./el-tooltip.586473e3.js";import{a as Y,b as A}from"./el-notification.b0af8560.js";import{E as ee}from"./el-message-box.952230e5.js";import"./el-overlay.745aacb3.js";import{a as te,g as T,d as ae}from"./article.31b5b603.js";import{f as oe}from"./func.1a17adec.js";import{_ as ie}from"./plugin-vue_export-helper.21dcd24c.js";import"./validator.f2c46fa4.js";import"./refs.0bcd5efa.js";const ne={class:"option",style:{padding:"5px 0"}},le=R({setup(se){const $=U(),_=q(),f=d(!1),g=d([]),m=d(!1),u=V({pageNum:1,pageSize:10}),v=d(0);let o={pageNum:1,pageSize:10,sortItem:"createdTime"};const C=()=>{_.push({name:"articleCreate"})},S=async e=>{o=Object.assign({},o,e),await s(e)},s=async e=>{try{m.value=!0;let t={};e!=null&&e.name?t=await te(e):t=await T(e),g.value=t==null?void 0:t.data.data,v.value=t==null?void 0:t.data.total}catch(t){A({duration:w().tipDurationS,type:"error",message:t.message})}finally{setTimeout(()=>{m.value=!1},300)}},B=e=>{_.push({name:"articleEdit",params:{id:e._id}})},N=async e=>{ee.confirm("\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u6587\u7AE0\u5417?","\u5220\u9664\u6587\u7AE0",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(async t=>{const i=await ae(e._id);i.status===200&&(await T(o),A({duration:w().tipDurationS,type:"success",message:`${e.name} ${i.data.message}`})),await s(o)}).catch(t=>{console.log(t)})},k=async e=>{o.orderType=e.order,await s(o)};return j(async()=>{await s(o)}),M(async()=>{$.query.reload==="true"&&await s(o)}),(e,t)=>{const i=Q,y=Y,x=W,H=X,z=J("permission"),I=P;return b(),p(H,{showSearch:"",pagination:r(u),"onUpdate:pagination":t[0]||(t[0]=a=>O(u)?u.value=a:u=a),visible:f.value,"onUpdate:visible":t[1]||(t[1]=a=>f.value=a),totalNum:v.value,btnAdd:e.$t("btn.addArticle"),onReloadData:S,onAddDataItem:C},{table:n(()=>[h((b(),p(x,{data:g.value,"empty-text":"\u6682\u65E0\u6587\u7AE0!",border:"",onSortChange:k},{default:n(()=>[l(i,{align:"center","min-width":"5%",type:"index",label:e.$t("tableH.orderNum"),width:"70"},null,8,["label"]),l(i,{"min-width":"250px",label:e.$t("tableH.articleTitle"),prop:"name"},null,8,["label"]),l(i,{width:"140px",label:e.$t("tableH.category"),prop:"category"},null,8,["label"]),l(i,{sortable:"custom",width:"165px",label:e.$t("tableH.createDate")},{default:n(a=>[D("div",null,c(r(oe)(a.row.createdTime)),1)]),_:1},8,["label"]),l(i,{"min-width":"10%",label:e.$t("tableH.operation"),align:"center",width:"150"},{default:n(a=>[D("div",ne,[l(y,{size:"small",type:"primary",plain:"",icon:r(K),onClick:L=>B(a.row)},{default:n(()=>[E(c(e.$t("btn.edit"))+" / "+c(e.$t("btn.view")),1)]),_:2},1032,["icon","onClick"]),h((b(),p(y,{size:"small",style:Z({"margin-top":r(F)().valueHasPermission(["admin"])?"10px":""}),type:"danger",plain:"",icon:r(G),onClick:L=>N(a.row)},{default:n(()=>[E(c(e.$t("btn.delete")),1)]),_:2},1032,["style","icon","onClick"])),[[z,["admin"]]])])]),_:1},8,["label"])]),_:1},8,["data"])),[[I,m.value]])]),_:1},8,["pagination","visible","totalNum","btnAdd"])}}});var he=ie(le,[["__scopeId","data-v-67230f83"]]);export{he as default};
