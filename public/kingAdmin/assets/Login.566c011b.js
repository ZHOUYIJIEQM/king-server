import{d as b,r as N,a as L,o as S,b as T,c as U,e as p,t as g,f as r,w as n,u as a,g as W,h as $,i as I,j as z,k as R,l as q,m as x,n as c,p as f}from"./index.81696f1b.js";import{E as A,a as M}from"./el-form-item.4b744ffc.js";import{E as P,a as j,b as E}from"./el-notification.b0af8560.js";import{_ as J}from"./TranslateBtn.93811751.js";import{f as K}from"./el-loading.0782f44d.js";import{l as w}from"./loading.6789562e.js";import{_ as O}from"./plugin-vue_export-helper.21dcd24c.js";import"./refs.0bcd5efa.js";function G(y){return K({url:"/login",method:"post",data:y})}const H={class:"login-page"},Q={class:"login-rule-form"},X={class:"title"},Y={class:"title-text"},Z={class:"translate-btn"},ee=b({setup(y){const{proxy:{$lodash:D}}=W(),B=$(),F=I(),s=N({userName:"admin",passWord:"123456"}),_=L(),k=N({userName:[{validator:(t,o,e)=>{if(o.trim()==="")return e(new Error("\u8BF7\u8F93\u5165\u7528\u6237\u540D!"));o.length<3?e(new Error("\u7528\u6237\u540D\u5E94\u4E0D\u5C0F\u4E8E3\u4F4D!")):e()},trigger:"blur"}],passWord:[{validator:(t,o,e)=>{o.trim()===""?e(new Error("\u8BF7\u8F93\u5165\u5BC6\u7801!")):o.length<6?e(new Error("\u5BC6\u7801\u8BE56\u4F4D\u4EE5\u4E0A!")):e()},trigger:"blur"}]}),C=()=>{s.userName==="admin"?s.userName="xiaoming":s.userName="admin"},v=t=>{!t||t.validate(async o=>{if(o){w.openLoading();try{const e=await G(s);if((e==null?void 0:e.status)===200){const{token:l,userName:u,userRoles:m}=e.data,i=new Date(Date.now()+c().expiredTime);f.set("loginTime",Date.now()),f.set("token",l,{expires:i}),f.set("userName",u,{expires:i}),f.set("userRoles",JSON.stringify(m),{expires:i}),B.query.redirect?F.replace({path:String(B.query.redirect)}):F.replace({name:"home"}),E({duration:c().tipDurationS,message:"\u767B\u5F55\u6210\u529F!",type:"success"})}w.closeLoading()}catch(e){console.log("\u767B\u5F55\u63A5\u53E3\u9519\u8BEF:",e),E({duration:c().tipDurationS,message:`\u767B\u5F55\u5931\u8D25! ${e.message}`,type:"error"})}finally{w.closeLoading()}}else return E({duration:c().tipDurationM,title:"Warning",message:"\u8BF7\u68C0\u67E5\u586B\u5199\u5185\u5BB9!",type:"warning"}),!1})},V=t=>{t.key.toLowerCase()==="enter"&&v(_.value)},h=D.debounce(V,300);return S(()=>{setTimeout(()=>{window.addEventListener("keydown",h)},300)}),T(()=>{window.removeEventListener("keydown",h)}),(t,o)=>{const e=J,l=P,u=A,m=j,i=M;return z(),U("div",H,[p("div",Q,[p("h1",X,[p("div",Y,g(t.$t("login.title")),1),p("div",Z,[r(e)])]),r(i,{ref_key:"ruleFormEl",ref:_,model:a(s),rules:a(k),class:"ruleForm"},{default:n(()=>[r(u,{class:"username",prop:"userName"},{default:n(()=>[r(l,{clearable:"",size:"large","prefix-icon":a(R),placeholder:"\u7528\u6237\u540D",modelValue:a(s).userName,"onUpdate:modelValue":o[0]||(o[0]=d=>a(s).userName=d),type:"text",autocomplete:"off"},null,8,["prefix-icon","modelValue"])]),_:1}),r(u,{class:"password",prop:"passWord"},{default:n(()=>[r(l,{"show-password":"",size:"large","prefix-icon":a(q),placeholder:"\u5BC6\u7801",modelValue:a(s).passWord,"onUpdate:modelValue":o[1]||(o[1]=d=>a(s).passWord=d),type:"password",autocomplete:"off"},null,8,["prefix-icon","modelValue"])]),_:1}),r(u,{class:"btns"},{default:n(()=>[r(m,{size:"large",type:"primary",onClick:o[2]||(o[2]=d=>v(_.value))},{default:n(()=>[x(g(t.$t("login.loginBtn")),1)]),_:1}),r(m,{size:"large",onClick:C},{default:n(()=>[x(g(t.$t("login.switchBtn")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])])])}}});var de=O(ee,[["__scopeId","data-v-18940b0e"]]);export{de as default};
