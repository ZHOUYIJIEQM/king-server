import{d as G,u as P,r as o,m as K,z as Y,y as J,o as c,c as i,h as r,F as D,b as I,n as O,e as n,t as h,i as Q,j as $,k as U,M as X,p,v as C,x as z,G as b,q as Z,s as ee,_ as te}from"./index.6ad1a6eb.js";import{S as ae,a as le}from"./swiper.min.7c38d4f8.js";import{r as se}from"./index.2b0276cf.js";const F={getRaceArticle:d=>se({url:"/race/center",method:"post",data:d})},oe=d=>(Z("data-v-c048131c"),d=d(),ee(),d),ue={class:"race-page"},ce=["onClick"],ie={class:"race-content-box",ref:"raceBox"},ne={class:"race-title"},re=oe(()=>r("span",null,"\u5B98\u65B9\u4E3E\u529E",-1)),ve=["src"],de={key:1,class:"race-text"},me=["onClick"],ge={class:"article-name eli"},fe={class:"article-time"},he={key:0,class:"bottom-loading"},pe={key:1,class:"no-data"},_e=G({__name:"Race",setup(d){const R=P(),g=o(["KPL","\u6311\u6218\u8005\u676F","\u5168\u56FD\u5927\u8D5B","K\u7532\u8054\u8D5B","\u9AD8\u6821\u8054\u8D5B","TGA","WGI","\u6A21\u62DF\u6218\u5927\u5E08\u8D5B"]),u=o(g.value.map(e=>({total:0,dataList:[]}))),f=o(g.value.map(e=>({name:e,pageNum:1,pageSize:5}))),T=o(["https://game.gtimg.cn/images/yxzj/m/m201706/images/matchindex/kpl.jpg","https://game.gtimg.cn/images/yxzj/m/m201706/images/matchindex/kcc.jpg","","https://game.gtimg.cn/images/yxzj/m/m201706/images/matchindex/kgl.jpg","","https://game.gtimg.cn/images/yxzj/m/m201706/images/matchindex/tga.jpg","https://game.gtimg.cn/images/yxzj/m/m201706/images/matchindex/wgi.jpg","https://game.gtimg.cn/images/yxzj/m/m201706/images/matchindex/mnz.jpg"]),t=o(0);let _=o(null);const N=e=>{_.value=e},m=o(null),E=o([]),v=o(null),S=o(null),y=o(!0),x=o(!1),H=async e=>{t.value=e,_.value.slideTo(e)},M=async()=>{const e=_.value.activeIndex;t.value=e;let l=E.value[e],a=m.value.offsetWidth;l.offsetLeft>a/2&&m.value.scrollTo({left:l.offsetLeft-a/2+l.offsetWidth/2,top:0,behavior:"smooth"}),l.offsetLeft<=a/2&&m.value.scrollTo({left:0,top:0,behavior:"smooth"}),await L()},L=async()=>{var e;if(y.value=!0,await b(),!u.value[t.value].total||v.value[t.value].$el.offsetHeight>S.value[t.value].offsetHeight&&u.value[t.value].dataList.length<u.value[t.value].total){f.value[t.value].pageNum+=1;let l=await F.getRaceArticle(f.value[t.value]);y.value=!1,(e=l.data.dataList)!=null&&e.length&&(u.value[t.value].dataList.push(...l.data.dataList),u.value[t.value].total=l.data.total),u.value[t.value].total&&await L()}};let B=null;const V=async()=>{B&&clearTimeout(B),B=setTimeout(async()=>{var e;if(!x.value&&v.value[t.value].$el.offsetHeight+v.value[t.value].$el.scrollTop>=v.value[t.value].$el.scrollHeight-50&&u.value[t.value].dataList.length<u.value[t.value].total){x.value=!0;let l=await F.getRaceArticle(f.value[t.value]);(e=l.data.dataList)!=null&&e.length&&(u.value[t.value].dataList.push(...l.data.dataList),u.value[t.value].total=l.data.total),f.value[t.value].pageNum+=1,x.value=!1}},300)},W=e=>{const l=s=>s<10?`0${s}`:`${s}`,a=new Date(e);return`${a.getFullYear()}-${l(a.getMonth()+1)}-${l(a.getDate())}`};K(async()=>{await L()});let j=0,A=Array.from({length:g.value.length},()=>0);return Y(()=>{j=Math.floor(m.value.scrollLeft),A=v.value.map(e=>e.$el.scrollTop)}),J(async()=>{await b(),m.value.scrollLeft=j,A.forEach((e,l)=>{v.value[l].$el.scrollTop=e})}),(e,l)=>(c(),i("div",ue,[r("div",{class:"nav-title",ref_key:"navTitlebox",ref:m},[(c(!0),i(D,null,I(n(g),(a,s)=>(c(),i("div",{class:O(["title-item",{active:n(t)===s}]),ref_for:!0,ref_key:"titleItem",ref:E,key:s,onClick:k=>H(s)},h(a),11,ce))),128))],512),r("div",ie,[Q(n(le),{class:"race-swiper",resistanceRatio:0,onSwiper:N,onSlideChange:M},{default:$(()=>[(c(!0),i(D,null,I(n(u),(a,s)=>(c(),U(n(ae),{class:"slide-item",ref_for:!0,ref_key:"slideItemBox",ref:v,key:s,onScrollPassive:V},{default:$(()=>{var k;return[r("div",{class:"item-box",ref_for:!0,ref_key:"slideItemInnerBox",ref:S},[r("div",ne,[X(" \u738B\u8005\u8363\u8000 "+h(n(g)[s])+" ",1),re]),n(T)[s].length?(c(),i("img",{key:0,class:"tagImg",src:n(T)[s],alt:""},null,8,ve)):p("",!0),(k=a==null?void 0:a.dataList)!=null&&k.length?(c(),i("div",de," \u8D5B\u4E8B\u8D44\u8BAF ")):p("",!0),(c(!0),i(D,null,I(a.dataList,(w,q)=>(c(),i("div",{class:"race-title-item",key:q,onClick:ye=>n(R).push({name:"articleDetail",params:{articleId:w._id}})},[r("div",ge,h(w.name),1),r("div",fe,h(W(w.createdTime)),1)],8,me))),128))],512),a.dataList.length?(c(),i("div",he,[C(r("p",null,"\u6B63\u5728\u52A0\u8F7D\u4E2D...",512),[[z,a.dataList.length<a.total]]),C(r("p",null,"\u5DF2\u663E\u793A\u5168\u90E8\u5185\u5BB9",512),[[z,a.dataList.length>=a.total]])])):p("",!0),!n(y)&&!a.dataList.length?(c(),i("div",pe,"\u6682\u65E0\u8BE5\u5206\u7C7B\u6570\u636E!")):p("",!0)]}),_:2},1024))),128))]),_:1})],512)]))}});const ke=te(_e,[["__scopeId","data-v-c048131c"]]);export{ke as default};
