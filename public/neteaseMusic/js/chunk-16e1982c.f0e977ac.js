(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-16e1982c"],{"00ee":function(t,r,e){var i=e("b622"),c=i("toStringTag"),n={};n[c]="z",t.exports="[object z]"===String(n)},"06d1":function(t,r,e){"use strict";e.r(r);var i=function(){var t=this,r=t._self._c;return r("div",{ref:"lyricBox",staticClass:"lyric-box",on:{touchstart:t.lyricBoxTouchS,touchend:t.lyricBoxTouchE,"&scroll":function(r){return t.lyricBoxScroll.apply(null,arguments)}}},[t.lyricTextArr.length?r("div",{staticClass:"lyric-text"},t._l(t.lyricTextArr,(function(e,i){return r("div",{key:i,ref:"lyricText",refInFor:!0,staticClass:"line",class:{active:t.lyricActiveIndex===i}},[r("p",[t._v(t._s(e.lyric))]),e.tlyric?r("p",[t._v(t._s(e.tlyric))]):t._e()])})),0):r("div",{staticClass:"no-lyric"},[t._v("暂无歌词!")])])},c=[],n=(e("14d9"),e("33d1"),e("ea98"),e("13d5"),{name:"Lyric",data(){return{lyricTextArr:[],lyricActiveIndex:0,lyricTimer:null,lyricCanScroll:!0}},props:{lyricObj:{type:Object,require:!0,default:function(){return{}}},playTime:{type:Number,require:!0,default:0}},computed:{timeKey(){return this.lyricTextArr.map(t=>t.time)}},watch:{lyricObj:{handler:function(t){Object.keys(t).length&&(this.lyricTextArr=[],this.lyricActiveIndex=0,this.extractLyric(t),this.$nextTick(()=>{this.scrollLyric()}))},deep:!0},playTime(t){this.lyricTextArr.length>1&&this.setActiveIndex(t)},lyricActiveIndex:{handler:function(){this.lyricCanScroll&&this.scrollLyric()},immediate:!0}},mounted(){this.lyricBoxEl=this.$refs.lyricBox},methods:{extractLyric(t){var r,e;let i={},c=null===t||void 0===t||null===(r=t.lrc)||void 0===r?void 0:r.lyric,n=null===t||void 0===t||null===(e=t.tlyric)||void 0===e?void 0:e.lyric;if(c&&(c=c.split("\n"),c.length&&(i.lyric=this.formatLyric(c))),n&&(n=n.split("\n"),n.length&&(i.tlyric=this.formatLyric(n))),i.lyric&&Object.keys(i.lyric).length){for(const t in i.lyric){let r={time:Number(t),lyric:i.lyric[t]};(null===i||void 0===i?void 0:i.tlyric)&&Object.assign(r,{tlyric:(null===i||void 0===i?void 0:i.tlyric[t])||""}),this.lyricTextArr.push(r)}this.lyricTextArr.sort((t,r)=>t.time-r.time),this.lyricTextArr.length>1&&this.lyricTextArr.at(-1).time-this.lyricTextArr.at(-2).time>300&&(this.lyricTextArr[this.lyricTextArr.length-1].time=this.lyricTextArr.at(-2).time+1),1===this.lyricTextArr.length&&(this.lyricTextArr[0].time=0)}},formatLyric(t){let r={};return t.forEach(t=>{let e=/^\[(.*?)\](.*)$/gi.exec(t);if(e&&e[2].length){let t=e[1].split(":").reverse().reduce((t,r,e)=>Number(t)+Number(r)*Math.pow(60,e));r[t.toFixed(2)]=e[2].trim()}}),r},setActiveIndex(t){if(t>=this.timeKey.at(-1))return this.lyricActiveIndex=this.timeKey.length-1;let r=this.timeKey.findIndex(r=>r>t);return this.lyricActiveIndex=r-1<0?0:r-1},scrollLyric(t=!1){if(!this.lyricTextArr.length)return;let r=this.$refs.lyricText[this.lyricActiveIndex],e=r.offsetTop-this.lyricBoxEl.offsetHeight/2+r.offsetHeight/2;t?this.lyricBoxEl.scrollTo({top:e}):this.lyricBoxEl.scrollTo({behavior:"smooth",top:e})},lyricBoxTouchS(){this.lyricCanScroll=!1},lyricBoxTouchE(){this.lyricCanScroll=!0,this.lyricTimer&&clearTimeout(this.lyricTimer),this.lyricTimer=setTimeout(()=>{this.scrollLyric()},500)},lyricBoxScroll(){this.lyricTimer&&clearTimeout(this.lyricTimer),this.lyricTimer=setTimeout(()=>{this.lyricCanScroll&&this.scrollLyric()},800)}}}),l=n,o=(e("6a0b"),e("2877")),s=Object(o["a"])(l,i,c,!1,null,"6a723700",null);r["default"]=s.exports},"13d5":function(t,r,e){"use strict";var i=e("23e7"),c=e("d58f").left,n=e("a640"),l=e("2d00"),o=e("605d"),s=n("reduce"),u=!o&&l>79&&l<83;i({target:"Array",proto:!0,forced:!s||u},{reduce:function(t){var r=arguments.length;return c(this,t,r,r>1?arguments[1]:void 0)}})},"1be4":function(t,r,e){var i=e("d066");t.exports=i("document","documentElement")},"33d1":function(t,r,e){"use strict";var i=e("23e7"),c=e("7b0b"),n=e("07fa"),l=e("5926"),o=e("44d2");i({target:"Array",proto:!0},{at:function(t){var r=c(this),e=n(r),i=l(t),o=i>=0?i:e+i;return o<0||o>=e?void 0:r[o]}}),o("at")},"37e8":function(t,r,e){var i=e("83ab"),c=e("aed9"),n=e("9bf2"),l=e("825a"),o=e("fc6a"),s=e("df75");r.f=i&&!c?Object.defineProperties:function(t,r){l(t);var e,i=o(r),c=s(r),u=c.length,a=0;while(u>a)n.f(t,e=c[a++],i[e]);return t}},"44d2":function(t,r,e){var i=e("b622"),c=e("7c73"),n=e("9bf2").f,l=i("unscopables"),o=Array.prototype;void 0==o[l]&&n(o,l,{configurable:!0,value:c(null)}),t.exports=function(t){o[l][t]=!0}},"577e":function(t,r,e){var i=e("f5df"),c=String;t.exports=function(t){if("Symbol"===i(t))throw TypeError("Cannot convert a Symbol value to a string");return c(t)}},"605d":function(t,r,e){var i=e("c6b6"),c=e("da84");t.exports="process"==i(c.process)},"6a0b":function(t,r,e){"use strict";e("b773")},"7c73":function(t,r,e){var i,c=e("825a"),n=e("37e8"),l=e("7839"),o=e("d012"),s=e("1be4"),u=e("cc12"),a=e("f772"),y=">",f="<",d="prototype",h="script",v=a("IE_PROTO"),p=function(){},x=function(t){return f+h+y+t+f+"/"+h+y},m=function(t){t.write(x("")),t.close();var r=t.parentWindow.Object;return t=null,r},b=function(){var t,r=u("iframe"),e="java"+h+":";return r.style.display="none",s.appendChild(r),r.src=String(e),t=r.contentWindow.document,t.open(),t.write(x("document.F=Object")),t.close(),t.F},T=function(){try{i=new ActiveXObject("htmlfile")}catch(r){}T="undefined"!=typeof document?document.domain&&i?m(i):b():m(i);var t=l.length;while(t--)delete T[d][l[t]];return T()};o[v]=!0,t.exports=Object.create||function(t,r){var e;return null!==t?(p[d]=c(t),e=new p,p[d]=null,e[v]=t):e=T(),void 0===r?e:n.f(e,r)}},a640:function(t,r,e){"use strict";var i=e("d039");t.exports=function(t,r){var e=[][t];return!!e&&i((function(){e.call(null,r||function(){return 1},1)}))}},b773:function(t,r,e){},d58f:function(t,r,e){var i=e("59ed"),c=e("7b0b"),n=e("44ad"),l=e("07fa"),o=TypeError,s=function(t){return function(r,e,s,u){i(e);var a=c(r),y=n(a),f=l(a),d=t?f-1:0,h=t?-1:1;if(s<2)while(1){if(d in y){u=y[d],d+=h;break}if(d+=h,t?d<0:f<=d)throw o("Reduce of empty array with no initial value")}for(;t?d>=0:f>d;d+=h)d in y&&(u=e(u,y[d],d,a));return u}};t.exports={left:s(!1),right:s(!0)}},df75:function(t,r,e){var i=e("ca84"),c=e("7839");t.exports=Object.keys||function(t){return i(t,c)}},ea98:function(t,r,e){"use strict";var i=e("23e7"),c=e("e330"),n=e("1d80"),l=e("5926"),o=e("577e"),s=e("d039"),u=c("".charAt),a=s((function(){return"\ud842"!=="𠮷".at(-2)}));i({target:"String",proto:!0,forced:a},{at:function(t){var r=o(n(this)),e=r.length,i=l(t),c=i>=0?i:e+i;return c<0||c>=e?void 0:u(r,c)}})},f5df:function(t,r,e){var i=e("00ee"),c=e("1626"),n=e("c6b6"),l=e("b622"),o=l("toStringTag"),s=Object,u="Arguments"==n(function(){return arguments}()),a=function(t,r){try{return t[r]}catch(e){}};t.exports=i?n:function(t){var r,e,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=a(r=s(t),o))?e:u?n(r):"Object"==(i=n(r))&&c(r.callee)?"Arguments":i}}}]);
//# sourceMappingURL=chunk-16e1982c.f0e977ac.js.map