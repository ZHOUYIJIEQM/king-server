{"version":3,"sources":["webpack:///./src/views/Login/PhoneLogin.vue","webpack:///src/views/Login/PhoneLogin.vue","webpack:///./src/views/Login/PhoneLogin.vue?6251","webpack:///./src/views/Login/PhoneLogin.vue?9d26","webpack:///./src/mixin/global.js","webpack:///./src/views/Login/PhoneLogin.vue?b9ce"],"names":["render","_vm","this","_c","_self","staticClass","on","goBack","scopedSlots","_u","key","fn","proxy","_v","_m","directives","name","rawName","value","phoneNum","expression","ref","attrs","domProps","$event","type","indexOf","_k","keyCode","next","apply","arguments","target","composing","length","clickCuowu","recoverAccout","staticRenderFns","mixins","components","Navbar","data","methods","message","className","duration","position","confirm","title","confirmButtonText","then","res","query","navName","catch","err","console","component","global","computed","loginStatus","$store","getters","playerPlayList","playList","adoEl","songId","goLogin","$router","push","logout","dispatch","toggleMenu","commit","history","historyList","go","clickMenu","log","goSearch","toTop","window","scroll","top","behavior","goPlaylist","id","params","String","location","href","includes","clickMvIcon","Number","toast","msg","durationT","$toast","copyText","input","document","createElement","style","left","body","appendChild","select","execCommand","removeChild","getScrollTop","pageYOffset","documentElement","scrollTop","getClientHeight","innerHeight","clientHeight","getScrollHeight","scrollHeight"],"mappings":"8IAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,SAAS,CAACE,YAAY,SAASC,GAAG,CAAC,UAAYL,EAAIM,QAAQC,YAAYP,EAAIQ,GAAG,CAAC,CAACC,IAAI,OAAOC,GAAG,WAAW,MAAO,CAACR,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,IAAI,CAACE,YAAY,4BAA4BO,OAAM,GAAM,CAACF,IAAI,SAASC,GAAG,WAAW,MAAO,CAACR,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACJ,EAAIY,GAAG,aAAaD,OAAM,OAAUT,EAAG,MAAM,CAACE,YAAY,eAAe,CAACJ,EAAIa,GAAG,GAAGX,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,OAAO,CAACF,EAAIY,GAAG,SAASV,EAAG,QAAQ,CAACY,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,WAAW,CAACD,KAAK,QAAQC,QAAQ,UAAUC,MAAOjB,EAAIkB,SAAUC,WAAW,aAAaC,IAAI,WAAWhB,YAAY,eAAeiB,MAAM,CAAC,YAAc,SAAS,KAAO,UAAUC,SAAS,CAAC,MAAStB,EAAIkB,UAAWb,GAAG,CAAC,QAAU,SAASkB,GAAQ,OAAIA,EAAOC,KAAKC,QAAQ,QAAQzB,EAAI0B,GAAGH,EAAOI,QAAQ,QAAQ,GAAGJ,EAAOd,IAAI,SAAgB,KAAYT,EAAI4B,KAAKC,MAAM,KAAMC,YAAY,MAAQ,SAASP,GAAWA,EAAOQ,OAAOC,YAAiBhC,EAAIkB,SAASK,EAAOQ,OAAOd,WAAUf,EAAG,MAAM,CAACY,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAOjB,EAAIkB,SAASe,OAAQd,WAAW,oBAAoBf,YAAY,QAAQC,GAAG,CAAC,MAAQL,EAAIkC,aAAa,CAAChC,EAAG,IAAI,CAACE,YAAY,4BAA4BF,EAAG,MAAM,CAACE,YAAY,OAAOC,GAAG,CAAC,MAAQL,EAAI4B,OAAO,CAAC5B,EAAIY,GAAG,SAASV,EAAG,MAAM,CAACE,YAAY,kBAAkBC,GAAG,CAAC,MAAQL,EAAImC,gBAAgB,CAACnC,EAAIY,GAAG,aAAa,IAEr4CwB,EAAkB,CAAC,WAAY,IAAIpC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,MAAM,CAACF,EAAIY,GAAG,cAAcV,EAAG,IAAI,CAACF,EAAIY,GAAG,0B,oCC0C3I,GACfyB,gBACAC,YACAC,4DAEAC,OACA,OACAtB,cAGAuB,SACAP,aACA,kBAGA,aAEA,oCAQA,OAPA,iCACA,aACAQ,uBACAC,iCACAC,aACAC,oBAKA,kDACA,IACA,uCACA,0CACA,YAEA,sBAAA9B,oBAGA,aACA+B,QAAA,CACAC,aACAL,2BACAM,yBAEAC,KAAAC,IACA,mBACAnC,gBACAoC,OAAAC,kBAGAC,MAAAC,IACAC,iBAGA,SACAA,eAzBC,QA2BD,yCAIApB,gBACA,mBACApB,gBACAoC,OAAAC,qBC3GmW,I,wBCQ/VI,EAAY,eACd,EACAzD,EACAqC,GACA,EACA,KACA,WACA,MAIa,aAAAoB,E,mGChBR,IAAIC,EAAS,CAClBjB,OACE,MAAO,IAETkB,SAAU,CAERC,cACE,OAAO1D,KAAK2D,OAAOC,QAAQF,aAE7BG,iBACE,OAAO7D,KAAK2D,OAAOC,QAAQE,UAE7BC,QACE,OAAO/D,KAAK2D,OAAOC,QAAQG,OAE7BC,SACE,OAAOhE,KAAK2D,OAAOC,QAAQI,SAG/BxB,QAAS,CAEPyB,WACGjE,KAAK0D,aAAe1D,KAAKkE,QAAQC,KAAK,CAAErD,KAAM,WAGjDsD,SACEpE,KAAK2D,OAAOU,SAAS,eAGvBC,aACEtE,KAAK2D,OAAOY,OAAO,eAIrBlE,SACE,IAAImE,EAAUxE,KAAK2D,OAAOC,QAAQa,YAC9BD,EAAQxC,OAAS,EACnBhC,KAAKkE,QAAQQ,IAAI,GAEjB1E,KAAKkE,QAAQC,KAAK,CAACrD,KAAM,UAI7B6D,YACErB,QAAQsB,IAAI,UAGdC,WAEE7E,KAAKkE,QAAQC,KAAK,CAACrD,KAAM,YAG3BgE,QACEC,OAAOC,OAAO,CAAEC,IAAK,EAAGC,SAAU,YAGpCC,WAAWC,GACT9B,QAAQsB,IAAI,QAASQ,GACrBpF,KAAKkE,QAAQC,KAAK,CAAErD,KAAM,iBAAkBuE,OAAQ,CAAED,SAExD,gBAAgBA,GAGdpF,KAAK2D,OAAOY,OAAO,eAAgBe,OAAOF,IAC1C,IAAIZ,EAAUxE,KAAK2D,OAAOC,QAAQa,YAC9BD,EAAQxC,QAAU,IAAM+C,OAAOQ,SAASC,KAAKC,SAAS,kBACxDV,OAAOQ,SAASC,MAAM,gBAExBxF,KAAK2D,OAAOY,OAAO,oBAAoB,IAEzCmB,YAAYN,EAAI7D,EAAK,MACnBvB,KAAK2D,OAAOY,OAAO,aAAcoB,OAAOP,IACxCpF,KAAKkE,QAAQC,KAAK,CAACrD,KAAM,WAAYuE,OAAQ,CAACD,MAAKlC,MAAO,CAAC3B,WAG7DqE,MAAMC,EAAKC,EAAY,MACrB9F,KAAK+F,OAAO,CACVtD,QAASoD,EACTnD,UAAW,cAAeC,SAAUmD,EAAWlD,SAAU,YAI7DoD,SAAShF,GAEP,IAAIiF,EAAQC,SAASC,cAAc,SACnCF,EAAMjF,MAAQA,EACdiF,EAAMG,MAAMxD,SAAW,WACvBqD,EAAMG,MAAMC,KAAO,WACnBJ,EAAMG,MAAMnB,IAAM,WAClBiB,SAASI,KAAKC,YAAYN,GAC1BA,EAAMO,SACNN,SAASO,YAAY,QACrBzG,KAAK4F,MAAM,oBACXM,SAASI,KAAKI,YAAYT,IAG5BU,eACE,OACE5B,OAAO6B,aACPV,SAASW,gBAAgBC,WACzBZ,SAASI,KAAKQ,WACd,GAIJC,kBACE,OACEhC,OAAOiC,aACPd,SAASW,gBAAgBI,cACzBf,SAASI,KAAKW,cACd,GAIJC,kBACE,OAAOhB,SAASI,KAAKa,cAAgBjB,SAASW,gBAAgBM,iB,oCCtHpE","file":"js/chunk-1dc8fc44.df752e9c.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"phone-page\"},[_c('Navbar',{staticClass:\"navbar\",on:{\"clickLeft\":_vm.goBack},scopedSlots:_vm._u([{key:\"left\",fn:function(){return [_c('div',{staticClass:\"icon\"},[_c('i',{staticClass:\"iconfont icon-cuowu\"})])]},proxy:true},{key:\"middle\",fn:function(){return [_c('div',{staticClass:\"cont\"},[_vm._v(\"手机号登录\")])]},proxy:true}])}),_c('div',{staticClass:\"phone-login\"},[_vm._m(0),_c('div',{staticClass:\"phone-num\"},[_c('span',[_vm._v(\"+86\")]),_c('input',{directives:[{name:\"focus\",rawName:\"v-focus\"},{name:\"model\",rawName:\"v-model\",value:(_vm.phoneNum),expression:\"phoneNum\"}],ref:\"phoneNum\",staticClass:\"number-input\",attrs:{\"placeholder\":\"请输入手机号\",\"type\":\"number\"},domProps:{\"value\":(_vm.phoneNum)},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.next.apply(null, arguments)},\"input\":function($event){if($event.target.composing)return;_vm.phoneNum=$event.target.value}}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.phoneNum.length),expression:\"phoneNum.length\"}],staticClass:\"cuowu\",on:{\"click\":_vm.clickCuowu}},[_c('i',{staticClass:\"iconfont icon-cuowu\"})])]),_c('div',{staticClass:\"next\",on:{\"click\":_vm.next}},[_vm._v(\"下一步\")]),_c('div',{staticClass:\"recover-account\",on:{\"click\":_vm.recoverAccout}},[_vm._v(\"找回账号\")])])],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"phone-text\"},[_c('div',[_vm._v(\"登录体验更多精彩\")]),_c('p',[_vm._v(\"未注册手机号登录后将自动创建账号\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <!-- 登录第二页 手机号登录 -->\r\n  <div class=\"phone-page\">\r\n    <Navbar\r\n      class=\"navbar\"\r\n      @clickLeft=\"goBack\"\r\n    >\r\n      <template #left>\r\n        <div class=\"icon\">\r\n          <i class=\"iconfont icon-cuowu\"></i>\r\n        </div>\r\n      </template>\r\n      <template #middle>\r\n        <div class=\"cont\">手机号登录</div>\r\n      </template>\r\n    </Navbar>\r\n    <div class=\"phone-login\">\r\n      <div class=\"phone-text\">\r\n        <div>登录体验更多精彩</div>\r\n        <p>未注册手机号登录后将自动创建账号</p>\r\n      </div>\r\n      <div class=\"phone-num\">\r\n        <span>+86</span>\r\n        <input\r\n          ref=\"phoneNum\"\r\n          v-focus\r\n          class=\"number-input\"\r\n          placeholder=\"请输入手机号\"\r\n          v-model=\"phoneNum\"\r\n          @keydown.enter=\"next\"\r\n          type=\"number\"\r\n        />\r\n        <div class=\"cuowu\" @click=\"clickCuowu\" v-show=\"phoneNum.length\">\r\n          <i class=\"iconfont icon-cuowu\"></i>\r\n        </div>\r\n      </div>\r\n      <div class=\"next\" @click=\"next\">下一步</div>\r\n      <div class=\"recover-account\" @click=\"recoverAccout\">找回账号</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { checkExistence } from \"@/api/api\";\r\nimport { global } from \"@/mixin/global.js\";\r\nexport default {\r\n  mixins: [global],\r\n  components: {\r\n    Navbar: () => import(\"@/components/Navbar\"),\r\n  },\r\n  data() {\r\n    return {\r\n      phoneNum: ''\r\n    }\r\n  },\r\n  methods: {\r\n    clickCuowu() {\r\n      this.phoneNum = ''\r\n    },\r\n    // 验证手机号, 并保存到 vuex, 再跳转到验证码输入页\r\n    async next() {\r\n      // 不符合条件\r\n      if (!/^1\\d{10}$/.test(this.phoneNum)) {\r\n        this.$refs.phoneNum.focus()\r\n        this.$toast({\r\n          message: \"请输入11位数字的手机号\",\r\n          className: \"toastT toastT-bottom\",\r\n          duration: 3000,\r\n          position: \"bottom\",\r\n        })\r\n        return\r\n      }\r\n      // 保存号码, 在下一个页面要用\r\n      this.$store.commit(\"saveCellPhone\", this.phoneNum);\r\n      try {\r\n        this.$store.commit(\"changeLoading\", true)\r\n        let check = await checkExistence(this.phoneNum)\r\n        if (check.exist === 1) {\r\n          // 已注册过, 去验证码页\r\n          this.$router.replace({ name: \"VerifyCode\" })\r\n        } else {\r\n          // 提示前往注册页\r\n          this.$dialog\r\n            .confirm({\r\n              title: \"注册提示\",\r\n              message: \"手机号还没注册过, 前往注册吧!\",\r\n              confirmButtonText: \"确定\",\r\n            })\r\n            .then(res => {\r\n              this.$router.push({ \r\n                name: \"Register\", \r\n                query: { navName: \"注册\" } \r\n              })\r\n            })\r\n            .catch(err => {\r\n              console.log(err);\r\n            })\r\n        }\r\n      } catch (error) {\r\n        console.log(error);\r\n      } finally {\r\n        this.$store.commit(\"changeLoading\", false);\r\n      }\r\n    },\r\n    // 去找回账号\r\n    recoverAccout() {\r\n      this.$router.push({ \r\n        name: \"Register\", \r\n        query: { navName: \"找回账号\" } \r\n      });\r\n    },\r\n  },\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@import '@/styles/variable.scss';\r\n@import '@/styles/mixin.scss';\r\n\r\n.phone-page {\r\n  padding: 0 .15rem;\r\n  color: #3a3a3a;\r\n  padding-top: $navHeight;\r\n  .navbar {\r\n    .icon-cuowu {\r\n      font-size: .2rem;\r\n    }\r\n    .cont {\r\n      @include df();\r\n      align-items: center;\r\n      height: 100%;\r\n      font-size: .17rem;\r\n      font-weight: bold;\r\n    }\r\n  }\r\n  .phone-login {\r\n    .phone-text {\r\n      margin-top: .25rem;\r\n      font-size: .18rem;\r\n      line-height: 1.8;\r\n      p {\r\n        font-size: .12rem;\r\n        color: #9e9e9e;\r\n      }\r\n    }\r\n  }\r\n  .phone-num {\r\n    margin-top: .3rem;\r\n    padding: .05rem 0;\r\n    border-bottom: 1px solid #cbcbcb;\r\n    @include df();\r\n    align-items: center;\r\n    color: black;\r\n    .number-input {\r\n      flex: 1;\r\n      border: 0;\r\n      margin-left: .12rem;\r\n      padding-right: .1rem;\r\n      caret-color: red;\r\n    }\r\n    .icon-cuowu {\r\n      font-size: .14rem;\r\n      color: #acacac;\r\n      padding: 0 .1rem;\r\n    }\r\n  }\r\n  .next {\r\n    margin-top: .38rem;\r\n    border-radius: .3rem;\r\n    background-color: #fe3a3b;\r\n    color: white;\r\n    text-align: center;\r\n    padding: .12rem 0;\r\n    &:active {\r\n      background-color: #eb2e2e;\r\n    }\r\n  }\r\n  .recover-account {\r\n    margin-top: .28rem;\r\n    color: #5b84b1;\r\n    font-size: .12rem;\r\n    text-align: center;\r\n  }\r\n}\r\n</style>\r\n\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PhoneLogin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PhoneLogin.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PhoneLogin.vue?vue&type=template&id=80d57c06&scoped=true&\"\nimport script from \"./PhoneLogin.vue?vue&type=script&lang=js&\"\nexport * from \"./PhoneLogin.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PhoneLogin.vue?vue&type=style&index=0&id=80d57c06&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"80d57c06\",\n  null\n  \n)\n\nexport default component.exports","// 一些在组件共用的属性, 函数\r\n\r\nimport { songDetail, songUrl } from '@/api/api'\r\nexport let global = {\r\n  data() {\r\n    return {};\r\n  },\r\n  computed: {\r\n    // 获取登录状态\r\n    loginStatus() {\r\n      return this.$store.getters.loginStatus;\r\n    },\r\n    playerPlayList() {\r\n      return this.$store.getters.playList\r\n    },\r\n    adoEl() {\r\n      return this.$store.getters.adoEl\r\n    },\r\n    songId() {\r\n      return this.$store.getters.songId\r\n    }\r\n  },\r\n  methods: {\r\n    // 去登录\r\n    goLogin() {\r\n      !this.loginStatus && this.$router.push({ name: \"Login\" });\r\n    },\r\n    // 退出登录\r\n    logout() {\r\n      this.$store.dispatch(\"userLogout\");\r\n    },\r\n    // 菜单显示/隐藏\r\n    toggleMenu() {\r\n      this.$store.commit(\"toggleMenu\");\r\n    },\r\n    // http://localhost:8080\r\n    // 路由返回, 如果第一次进入的页面有导航返回键, go(-1), 是无效的, 把访问过的路由记录到 vuex, 只有一个路由还点了返回键, 就直接跳到首页\r\n    goBack() {\r\n      let history = this.$store.getters.historyList\r\n      if (history.length > 1) {\r\n        this.$router.go(-1);\r\n      } else {\r\n        this.$router.push({name: 'Find'})\r\n      }\r\n    },\r\n    // 点击菜单字体图标\r\n    clickMenu() {\r\n      console.log(\"点击了菜单\");\r\n    },\r\n    // 去搜索\r\n    goSearch() {\r\n      // console.log(\"前往搜索页\");\r\n      this.$router.push({name: 'Search'})\r\n    },\r\n    // 返回顶部\r\n    toTop() {\r\n      window.scroll({ top: 0, behavior: 'smooth'})\r\n    },\r\n    // 前往 歌单\r\n    goPlaylist(id) {\r\n      console.log(\"点击歌单:\", id);\r\n      this.$router.push({ name: \"PlayListDetail\", params: { id } });\r\n    },\r\n    async clickSong(id) {\r\n      // console.log('点击歌曲', id);\r\n      // http://localhost:8080/#/Home/Find\r\n      this.$store.commit('changeSongId', String(id))\r\n      let history = this.$store.getters.historyList\r\n      if (history.length <= 1 && !window.location.href.includes('?player=show')) {\r\n        window.location.href+='?player=show'\r\n      }\r\n      this.$store.commit('changeShowPlayer', true)\r\n    },\r\n    clickMvIcon(id, type=\"mv\") {\r\n      this.$store.commit('changeMvId', Number(id))\r\n      this.$router.push({name: 'MvPlayer', params: {id}, query: {type}})\r\n    },\r\n    // toast 提示\r\n    toast(msg, durationT = 1500) {\r\n      this.$toast({\r\n        message: msg,\r\n        className: \"playerToast\", duration: durationT, position: \"bottom\",\r\n      });\r\n    },\r\n    // 复制文本 value \r\n    copyText(value) {\r\n      // 创建的input需要加到 body, 不然复制不到值\r\n      let input = document.createElement('input')\r\n      input.value = value\r\n      input.style.position = 'absolute'\r\n      input.style.left = '-10000px'\r\n      input.style.top = '-10000px'\r\n      document.body.appendChild(input)\r\n      input.select()\r\n      document.execCommand('copy')\r\n      this.toast('复制成功! 快和小伙伴们分享吧!')\r\n      document.body.removeChild(input)\r\n    },\r\n    // 已滚动高度\r\n    getScrollTop() {\r\n      return (\r\n        window.pageYOffset ||\r\n        document.documentElement.scrollTop ||\r\n        document.body.scrollTop ||\r\n        0\r\n      );\r\n    },\r\n    // 窗口可视高度\r\n    getClientHeight() {\r\n      return (\r\n        window.innerHeight ||\r\n        document.documentElement.clientHeight ||\r\n        document.body.clientHeight ||\r\n        0\r\n      );\r\n    },\r\n    // 获取已滚动高度\r\n    getScrollHeight() {\r\n      return document.body.scrollHeight || document.documentElement.scrollHeight\r\n    }\r\n  },\r\n};\r\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PhoneLogin.vue?vue&type=style&index=0&id=80d57c06&prod&lang=scss&scoped=true&\""],"sourceRoot":""}