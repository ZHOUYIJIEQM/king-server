(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e8093e8","chunk-211cfdb4"],{"03e2":function(t,e,s){},"2ca6":function(t,e,s){},"5a84":function(t,e,s){"use strict";s.d(e,"a",(function(){return a}));s("14d9"),s("4ec3");let a={data(){return{}},computed:{loginStatus(){return this.$store.getters.loginStatus},playerPlayList(){return this.$store.getters.playList},adoEl(){return this.$store.getters.adoEl},songId(){return this.$store.getters.songId}},methods:{goLogin(){!this.loginStatus&&this.$router.push({name:"Login"})},logout(){this.$store.dispatch("userLogout")},toggleMenu(){this.$store.commit("toggleMenu")},goBack(){let t=this.$store.getters.historyList;t.length>1?this.$router.go(-1):this.$router.push({name:"Find"})},clickMenu(){console.log("点击了菜单")},goSearch(){this.$router.push({name:"Search"})},toTop(){window.scroll({top:0,behavior:"smooth"})},goPlaylist(t){console.log("点击歌单:",t),this.$router.push({name:"PlayListDetail",params:{id:t}})},async clickSong(t){this.$store.commit("changeSongId",String(t));let e=this.$store.getters.historyList;e.length<=1&&!window.location.href.includes("?player=show")&&(window.location.href+="?player=show"),this.$store.commit("changeShowPlayer",!0)},clickMvIcon(t,e="mv"){this.$store.commit("changeMvId",Number(t)),this.$router.push({name:"MvPlayer",params:{id:t},query:{type:e}})},toast(t,e=1500){this.$toast({message:t,className:"playerToast",duration:e,position:"bottom"})},copyText(t){let e=document.createElement("input");e.value=t,e.style.position="absolute",e.style.left="-10000px",e.style.top="-10000px",document.body.appendChild(e),e.select(),document.execCommand("copy"),this.toast("复制成功! 快和小伙伴们分享吧!"),document.body.removeChild(e)},getScrollTop(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},getClientHeight(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0},getScrollHeight(){return document.body.scrollHeight||document.documentElement.scrollHeight}}}},ae8c:function(t,e,s){},ce0f:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.playList.id,expression:"playList.id"}],staticClass:"playlist-comment-page"},[e("Navbar",{ref:"navbar",staticClass:"navbar",on:{clickLeft:t.goBack},scopedSlots:t._u([{key:"left",fn:function(){return[e("div",{staticClass:"icon"},[e("i",{staticClass:"iconfont icon-fanhui"})])]},proxy:!0},{key:"middle",fn:function(){return[e("div",{staticClass:"title"},[e("span",[t._v("评论")]),t.commentCount?e("span",[t._v("("+t._s(t.commentCount)+")")]):t._e()])]},proxy:!0}])}),e("div",{staticClass:"playlist-info"},[e("div",{staticClass:"box"},[t.playList.id?[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.playList.coverImgUrl+"?param=100y100",expression:"playList.coverImgUrl+'?param=100y100'"}],attrs:{alt:""}}),e("div",{staticClass:"des-info"},[e("p",{staticClass:"name"},[t._v(t._s(t.playList.name))]),e("p",{staticClass:"author"},[t._v("by "),e("span",[t._v(t._s(t.playList.creator.nickname))])])]),t._m(0)]:t._e()],2)]),e("van-sticky",{directives:[{name:"show",rawName:"v-show",value:t.commentCount,expression:"commentCount"}],attrs:{"offset-top":".5rem"}},[e("div",{staticClass:"comment-title"},[e("span",{staticClass:"active"},[t._v("评论区")]),e("span",{staticClass:"tag",class:{active:"推荐"===t.active},on:{click:function(e){return t.setActive("推荐")}}},[t._v("推荐")]),e("span",{staticClass:"tag",class:{active:"最热"===t.active},on:{click:function(e){return t.setActive("最热")}}},[t._v("最热")]),e("span",{staticClass:"tag",class:{active:"最新"===t.active},on:{click:function(e){return t.setActive("最新")}}},[t._v("最新")])])]),t.comments.length?e("div",{staticClass:"comments-box"},[t._l(t.comments,(function(s,a){return e("div",{key:a,staticClass:"comment-item"},[e("CommentItem",{attrs:{commentData:s,commentType:2,resourceId:t.commentId}})],1)})),this.hasMore?t._e():e("div",{staticClass:"bottom"},[t._v("没有更多了哦!")])],2):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.commentCount,expression:"!commentCount"}],staticClass:"no-comments"},[t._v(" 暂无评论, 欢迎抢沙发 ")]),t._m(1)],1)},i=[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"right"},[e("i",{staticClass:"iconfont icon-jiantou"})])},function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"bottom-input"},[e("input",{attrs:{type:"text",placeholder:"写评论..."}}),e("p",[t._v("发送")])])}],o=(s("14d9"),s("d178")),n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"comment-item-comp"},[e("div",{staticClass:"comment-box"},[e("div",{staticClass:"img-box"},[e("img",{staticClass:"avatar",attrs:{src:t.commentData.user.avatarUrl+"?param=200y200",alt:""}}),t.commentData.pendantData?e("img",{staticClass:"pendant",attrs:{src:t.commentData.pendantData.imageUrl+"?param=200y200",alt:""}}):t._e(),t.commentData.user.avatarDetail?e("img",{staticClass:"avatarDetail",attrs:{src:t.commentData.user.avatarDetail.identityIconUrl,alt:""}}):t._e()]),e("div",{staticClass:"comment-content"},[e("div",{staticClass:"top"},[e("div",{staticClass:"user"},[e("div",{staticClass:"name"},[e("span",{staticClass:"user-name"},[t._v(t._s(t.commentData.user.nickname))]),t.commentData.user.vipRights?e("span",{staticClass:"vip-box"},[e("img",{attrs:{src:s("e064"),alt:""}}),e("span",{staticClass:"split"},[t._v("▪")]),e("span",{staticClass:"level"},[t._v(t._s(t.commentData.user.vipRights.redVipLevel))])]):t._e()]),e("div",{staticClass:"date"},[t._v(t._s(t._f("formatTime")(t.commentData.time)))])]),e("div",{staticClass:"zan"},[t.commentData.likedCount?e("span",{staticClass:"zan-num",style:{color:t.commentData.liked?"#fe3a3b":""}},[t._v(t._s(t.commentData.likedCount))]):t._e(),t.commentData.liked?e("i",{staticClass:"iconfont icon-z-likeFill"}):e("i",{staticClass:"iconfont icon-zan"})])]),e("div",{staticClass:"content"},[e("pre",{staticClass:"format"},[t._v(t._s(t.commentData.content))])]),t.commentData.showFloorComment.replyCount?e("div",{staticClass:"reply",on:{click:function(e){return e.stopPropagation(),t.clickReply.apply(null,arguments)}}},[t._v(t._s(t.commentData.showFloorComment.replyCount)+"条回复 "),e("i",{staticClass:"iconfont icon-jiantou"})]):t._e()])]),e("van-popup",{staticClass:"floor-comment",style:{height:"92%"},attrs:{round:"",position:"bottom","overlay-style":{"background-color":"hsl(0deg 0% 0% / 30%)"}},on:{close:t.clickOverlay},model:{value:t.showReply,callback:function(e){t.showReply=e},expression:"showReply"}},[e("div",{staticClass:"title"},[e("i",{staticClass:"iconfont icon-fanhui",on:{click:t.clickOverlay}}),e("span",{staticClass:"reply"},[t._v("回复")]),t.totalCount?e("span",[t._v("("+t._s(t.totalCount)+")")]):t._e()]),e("div",{staticClass:"content"},t._l(100,(function(s,a){return e("div",{key:a},[t._v(t._s(s))])})),0),e("div",{staticClass:"bottom-input"},[e("input",{attrs:{type:"text",placeholder:"写评论..."}}),e("p",[t._v("发送")])])])],1)},c=[],l=s("4ec3"),r={props:{commentData:{type:Object,require:!0,default:function(){return{}}},resourceId:{type:[String,Number],require:!0},commentType:{type:[String,Number],require:!0}},data(){return{showReply:!1,parentCommentId:this.commentData.commentId,time:0,totalCount:0}},methods:{async getComment(){let t={parentCommentId:this.parentCommentId,id:this.resourceId,type:this.commentType,limit:20};this.time&&(t.time=this.time),console.log("参数:",t);let e=await Object(l["c"])(t);console.log(e),this.totalCount=e.data.totalCount},formatComment(t){return t.replace(/\n/g,"<br>")},clickReply(){this.showReply=!0,this.$store.commit("changeShowReply",!0),this.showReply&&this.getComment()},clickOverlay(){this.showReply=!1,this.$store.commit("changeShowReply",!1)}},watch:{"$store.getters.showReply":{handler:function(t){t||(this.showReply=!1)}}}},m=r,h=(s("e09c"),s("2877")),u=Object(h["a"])(m,n,c,!1,null,"54c661ae",null),d=u.exports,p=s("5a84"),g={name:"PlayListComment",mixins:[p["a"]],components:{Navbar:o["default"],CommentItem:d},data(){return{commentId:this.$route.params.id,comments:[],playList:{},active:"最新",pageNum:1,hasMore:!0,loading:!1}},computed:{commentCount(){return this.playList.commentCount},showReply(){return this.$store.getters.showReply}},mounted(){this.getPlayList(),window.addEventListener("scroll",this.handlerScroll)},destroyed(){window.removeEventListener("scroll",this.handlerScroll)},beforeRouteLeave(t,e,s){this.showReply?(this.$store.commit("changeShowReply",!1),s(!1)):s()},methods:{formatComment(t){return t.replace(/\n/g,"<br>")},async getPlayList(){try{this.$store.commit("changeLoading",!0);let t=await Object(l["y"])(this.commentId);this.playList=t.playlist,this.loadingData=!1,this.getComment()}catch(t){console.log(t)}finally{setTimeout(()=>{this.$store.commit("changeLoading",!1)},100)}},async getComment(){try{if(this.hasMore){this.$store.commit("changeLoading",!0);let t={type:2,id:this.commentId,pageSize:20,pageNo:this.pageNum};"推荐"===this.active?t.sortType=99:"最新"===this.active?(t.sortType=3,this.cursor&&(t.cursor=this.cursor)):(t.sortType=2,this.cursor&&(t.cursor=this.cursor));let e=await Object(l["d"])(t);console.log(e.data),this.hasMore=e.data.hasMore,e.data.cursor&&(this.cursor=e.data.cursor),this.pageNum++,this.comments.push(...e.data.comments),this.loading=!1,this.$store.commit("changeLoading",!1)}}catch(t){this.loading=!1,this.$toast("新版评论接口获取数据错误"),console.log("加载评论错误:\n",t)}finally{this.$store.commit("changeLoading",!1)}},setActive(t){this.active!==t&&(this.active=t,this.cursor=null,this.hasMore=!0,this.comments=[],this.pageNum=1,this.getComment(),"推荐"!==t&&"最热"!==t||this.$toast({message:"接口存在bug, 推荐, 最热可能无法正常读取数据!",className:"toastT",duration:2e3,position:"bottom"}))},handlerScroll(){console.log("歌单评论滚动");let t=this.getScrollTop(),e=this.getScrollHeight(),s=this.getClientHeight();t+s+100>=e&&!this.loading&&(console.log("到底了"),this.loading=!0,this.getComment())}}},v=g,y=(s("ff16"),Object(h["a"])(v,a,i,!1,null,"d42be7ce",null));e["default"]=y.exports},d178:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"navbar-comp"},[e("div",{staticClass:"left",on:{click:function(e){return t.clickItem("left")}}},[t._t("left")],2),e("div",{staticClass:"middle",on:{click:function(e){return t.clickItem("middle")}}},[t._t("middle")],2),e("div",{staticClass:"right",on:{click:function(e){return t.clickItem("right")}}},[t._t("right")],2),e("div",{staticClass:"background"},[t._t("background")],2)])},i=[],o={methods:{clickItem(t){"left"===t&&this.$emit("clickLeft"),"middle"===t&&this.$emit("clickMiddle"),"right"===t&&this.$emit("clickRight")}},mounted(){this.$emit("navbarMounted")}},n=o,c=(s("d714"),s("2877")),l=Object(c["a"])(n,a,i,!1,null,"2ce0cfb9",null);e["default"]=l.exports},d714:function(t,e,s){"use strict";s("ae8c")},e064:function(t,e){t.exports="data:image/png;base64,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"},e09c:function(t,e,s){"use strict";s("2ca6")},ff16:function(t,e,s){"use strict";s("03e2")}}]);
//# sourceMappingURL=chunk-5e8093e8.7ed1686f.js.map