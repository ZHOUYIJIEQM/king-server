(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-626bbf6e"],{"02b2":function(t,o,e){t.exports=e.p+"img/未登录.a0f6edd6.png"},"0ec8":function(t,o,e){"use strict";e.r(o);var i=function(){var t=this,o=t._self._c;t._self._setupProxy;return o("div",{staticClass:"mv-player-page"},[o("div",{staticClass:"nav"},[o("i",{staticClass:"iconfont icon-fanhui",on:{click:t.goBack}}),o("i",{staticClass:"iconfont icon-gengduoxiao"})]),o("div",{staticClass:"vdo-content"},[o("div",{staticClass:"vdo-box"},[o("video",{ref:"vdoEl",staticClass:"video-ele",on:{click:t.togglePlay,play:t.vdoPlay,pause:t.vdoPause,loadeddata:t.vdoLoadedData,timeupdate:t.vdoTimeUpdate,error:t.vdoError}})]),o("transition",{attrs:{name:"fadeIn"}},["paused"===t.playState?o("i",{staticClass:"iconfont icon-bofang2",on:{click:t.togglePlay}}):t._e()]),t.vdoInfo.id?o("div",{staticClass:"author-box"},[o("div",{staticClass:"artist"},[o("div",{staticClass:"avatar-box"},[o("img",{staticClass:"avatar",attrs:{src:t.vdoInfo.creator.avatarUrl||t.defaultImg,alt:""}}),t.vdoInfo.creator.identityIconUrl?o("img",{staticClass:"identityIcon",attrs:{src:t.vdoInfo.creator.identityIconUrl}}):t._e()]),o("div",{staticClass:"name"},[t._v(" "+t._s(t.vdoInfo.creator.nickname)+" ")]),t._m(0)]),o("div",{staticClass:"des-box"},[o("div",{staticClass:"title",on:{click:t.toggleShowDes}},[o("span",[t._v(t._s(t.vdoInfo.title))]),t.vdoInfo.description&&!t.showDes?o("i",{staticClass:"iconfont icon-triangle-down"}):t._e(),t.vdoInfo.description&&t.showDes?o("i",{staticClass:"iconfont icon-triangle-up"}):t._e()]),t.vdoInfo.description&&t.showDes?o("div",{staticClass:"des",domProps:{innerHTML:t._s(t.vdoInfo.description)}}):t._e()])]):t._e(),t.vdoInfo.id?o("div",{staticClass:"right-bar"},[o("div",{staticClass:"icon-box"},[o("i",{staticClass:"iconfont icon-z-likeFill"}),o("p",[t._v(t._s(t._f("formatNum")(t.vdoInfo.praisedCount)))])]),o("div",{staticClass:"icon-box"},[o("i",{staticClass:"iconfont icon-pinglunpt-wangyiicon"}),o("p",[t._v(t._s(t._f("formatNum")(t.vdoInfo.commentCount)))])]),o("div",{staticClass:"icon-box"},[o("i",{staticClass:"iconfont icon-fenxiangpt"}),o("p",[t._v(t._s(t._f("formatNum")(t.vdoInfo.shareCount)))])]),o("div",{staticClass:"icon-box"},[o("i",{staticClass:"iconfont icon-jia1"}),o("p",[t._v(t._s(t._f("formatNum")(t.vdoInfo.subscribeCount)))])])]):t._e(),o("div",{staticClass:"progress-box"},[o("van-slider",{attrs:{"bar-height":t.barHeight,"button-size":t.buttonSize,"active-color":t.activeColor,"inactive-color":t.inActiveColor},on:{input:t.progressChange,change:t.progressChangeEnd},model:{value:t.progressTime,callback:function(o){t.progressTime=o},expression:"progressTime"}})],1)],1),t._m(1)])},s=[function(){var t=this,o=t._self._c;t._self._setupProxy;return o("div",{staticClass:"follow"},[o("i",{staticClass:"iconfont icon-jiahao"}),t._v("关注")])},function(){var t=this,o=t._self._c;t._self._setupProxy;return o("div",{staticClass:"bottom"},[o("i",{staticClass:"iconfont icon-yinle"}),o("span",{attrs:{lang:""}},[t._v("暂无相关音乐!")])])}],a=e("4ec3"),n=e("5a84"),r={mixins:[n["a"]],name:"MvPlayer",data(){return{defaultImg:e("02b2"),vdoInfo:{},showDes:!1,playState:"paused",progressTime:0,activeColor:"rgba(255, 255, 255, .35)",inActiveColor:"rgba(255, 255, 255, .15)",barHeight:".03rem",buttonSize:".09rem"}},mounted(){this.$store.commit("changeLoading",!0),this.initSet()},methods:{initSet(){this.vdoEl=this.$refs.vdoEl},togglePlay(){this.vdoEl.paused?this.vdoEl.play():this.vdoEl.pause()},vdoPlay(){this.playState="playing",this.setButton("small")},vdoPause(){this.playState="paused",this.setButton("big")},vdoError(){console.log("error")},setButton(t){this.progTimer&&clearTimeout(this.progTimer),this.progTimer="big"==t?setTimeout(()=>{this.barHeight=".03rem",this.buttonSize=".09rem"},200):setTimeout(()=>{this.barHeight=".015rem",this.buttonSize=".04rem"},1e3)},bigButton(){this.barHeight=".03rem",this.buttonSize=".09rem",this.progTimer&&clearTimeout(this.progTimer),this.progTimer=setTimeout(()=>{this.barHeight=".015rem",this.buttonSize=".04rem"},1e3)},vdoTimeUpdate(){this.isDrag||(this.progressTime=this.vdoEl.currentTime/this.vdoEl.duration*100)},vdoLoadedData(){let t=this.vdoEl.videoWidth/this.vdoEl.videoHeight;t>=1?(this.vdoEl.style.objectFit="contain",this.vdoEl.parentElement.style.alignItems="center"):(this.vdoEl.style.objectFit="cover",this.vdoEl.parentElement.style.alignItems="flex-start")},progressChange(){this.isDrag=!0,this.bigButton()},progressChangeEnd(){this.vdoEl.currentTime=this.progressTime/100*this.vdoEl.duration,this.vdoEl.paused&&this.vdoEl.play(),this.isDrag=!1},toggleShowDes(){this.showDes=!this.showDes},async videoGetData(t){let o=await Object(a["p"])(t);200===o.code?this.vdoInfo={id:t,creator:{id:o.data.creator.userId,nickname:o.data.creator.nickname,avatarUrl:o.data.creator.avatarUrl,identityIconUrl:o.data.creator.avatarDetail&&o.data.creator.avatarDetail.identityIconUrl},title:o.data.title,description:o.data.description&&o.data.description.replace(/\n/g,"<br>"),duration:o.data.durationms/1e3,commentCount:o.data.commentCount,praisedCount:o.data.praisedCount,shareCount:o.data.shareCount,subscribeCount:o.data.subscribeCount}:this.toast("获取视频详情错误");let e=await Object(a["q"])(t);200===e.code?this.vdoInfo.url=e.urls[0].url:this.toast("获取播放地址错误"),this.$nextTick(()=>{this.$refs.vdoEl.setAttribute("src",this.vdoInfo.url),this.$refs.vdoEl.play()}),this.$store.commit("changeLoading",!1)},async mvGetData(t){let o=await Object(a["m"])(t);200===o.code?this.vdoInfo={id:t,creator:{id:o.data.artists[0].id,nickname:o.data.artists[0].name,avatarUrl:o.data.artists[0].img1v1Url||o.data.cover},title:o.data.name,description:o.data.desc&&o.data.desc.replace(/\n/g,"<br>"),duration:o.data.duration/1e3,commentCount:o.data.commentCount,praisedCount:o.data.subCount,shareCount:o.data.shareCount,subscribeCount:o.data.subCount}:this.toast("获取视频详情错误");let e=await Object(a["n"])(t,1080);200===e.code?this.vdoInfo.url=e.data.url:this.toast("获取播放地址错误"),this.$nextTick(()=>{this.$refs.vdoEl.setAttribute("src",this.vdoInfo.url),this.$refs.vdoEl.play()}),this.$store.commit("changeLoading",!1)},async mlogGetData(t){let o=await Object(a["l"])(t);if(console.log(o),200!==o.code)throw this.toast("获取mlog错误! 该链接无法播放!",3e3),this.$store.commit("changeLoading",!1),"获取mlog错误! 该链接可能无法播放!";this.videoGetData(o.data)}},watch:{"$route.params.id":{handler:function(t){try{this.$store.commit("changeLoading",!0);let o=this.$route.query.type;"mv"===o?this.mvGetData(t):"video"===o?this.videoGetData(t):"mlog"===o&&this.mlogGetData(t)}catch(o){console.log("获取必要信息错误!"),this.toast("获取必要信息错误",2e3)}finally{this.$store.commit("changeLoading",!1)}},immediate:!0}}},c=r,l=(e("915e"),e("a216"),e("2877")),d=Object(l["a"])(c,i,s,!1,null,"7a7c4a38",null);o["default"]=d.exports},"5a84":function(t,o,e){"use strict";e.d(o,"a",(function(){return i}));e("14d9"),e("4ec3");let i={data(){return{}},computed:{loginStatus(){return this.$store.getters.loginStatus},playerPlayList(){return this.$store.getters.playList},adoEl(){return this.$store.getters.adoEl},songId(){return this.$store.getters.songId}},methods:{goLogin(){!this.loginStatus&&this.$router.push({name:"Login"})},logout(){this.$store.dispatch("userLogout")},toggleMenu(){this.$store.commit("toggleMenu")},goBack(){let t=this.$store.getters.historyList;t.length>1?this.$router.go(-1):this.$router.push({name:"Find"})},clickMenu(){console.log("点击了菜单")},goSearch(){this.$router.push({name:"Search"})},toTop(){window.scroll({top:0,behavior:"smooth"})},goPlaylist(t){console.log("点击歌单:",t),this.$router.push({name:"PlayListDetail",params:{id:t}})},async clickSong(t){this.$store.commit("changeSongId",String(t));let o=this.$store.getters.historyList;o.length<=1&&!window.location.href.includes("?player=show")&&(window.location.href+="?player=show"),this.$store.commit("changeShowPlayer",!0)},clickMvIcon(t,o="mv"){this.$store.commit("changeMvId",Number(t)),this.$router.push({name:"MvPlayer",params:{id:t},query:{type:o}})},toast(t,o=1500){this.$toast({message:t,className:"playerToast",duration:o,position:"bottom"})},copyText(t){let o=document.createElement("input");o.value=t,o.style.position="absolute",o.style.left="-10000px",o.style.top="-10000px",document.body.appendChild(o),o.select(),document.execCommand("copy"),this.toast("复制成功! 快和小伙伴们分享吧!"),document.body.removeChild(o)},getScrollTop(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},getClientHeight(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0},getScrollHeight(){return document.body.scrollHeight||document.documentElement.scrollHeight}}}},"915e":function(t,o,e){"use strict";e("b8de")},a216:function(t,o,e){"use strict";e("cf09")},b8de:function(t,o,e){},cf09:function(t,o,e){}}]);
//# sourceMappingURL=chunk-626bbf6e.fea3e684.js.map