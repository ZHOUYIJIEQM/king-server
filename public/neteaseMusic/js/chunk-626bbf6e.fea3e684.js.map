{"version":3,"sources":["webpack:///./src/assets/mine/未登录.png","webpack:///./src/views/MvPlayer/MvPlayer.vue","webpack:///./src/views/MvPlayer/MvPlayer.js","webpack:///./src/views/MvPlayer/MvPlayer.js?0f8b","webpack:///./src/views/MvPlayer/MvPlayer.vue?2139","webpack:///./src/mixin/global.js","webpack:///./src/views/MvPlayer/MvPlayer.scss?0c9e","webpack:///./src/views/MvPlayer/MvPlayer.vue?abf2"],"names":["module","exports","render","_vm","this","_c","_self","_setupProxy","staticClass","on","goBack","ref","togglePlay","vdoPlay","vdoPause","vdoLoadedData","vdoTimeUpdate","vdoError","attrs","playState","_e","vdoInfo","id","creator","avatarUrl","defaultImg","identityIconUrl","_v","_s","nickname","_m","toggleShowDes","title","description","showDes","domProps","_f","praisedCount","commentCount","shareCount","subscribeCount","barHeight","buttonSize","activeColor","inActiveColor","progressChange","progressChangeEnd","model","value","progressTime","callback","$$v","expression","staticRenderFns","mixins","global","name","data","require","mounted","$store","commit","initSet","methods","vdoEl","$refs","paused","play","pause","setButton","console","log","type","progTimer","clearTimeout","setTimeout","bigButton","isDrag","currentTime","duration","ratio","videoWidth","videoHeight","style","objectFit","parentElement","alignItems","newV","vdoDetailData","getVdoDetail","code","userId","avatarDetail","replace","durationms","toast","vdoData","getVdoUrl","url","urls","$nextTick","setAttribute","mvDetailData","getMvDetail","artists","img1v1Url","cover","desc","subCount","mvData","getMvUrl","getMLogtoVideoId","videoGetData","watch","handler","$route","query","mvGetData","mlogGetData","error","immediate","component","computed","loginStatus","getters","playerPlayList","playList","adoEl","songId","goLogin","$router","push","logout","dispatch","toggleMenu","history","historyList","length","go","clickMenu","goSearch","toTop","window","scroll","top","behavior","goPlaylist","params","String","location","href","includes","clickMvIcon","Number","msg","durationT","$toast","message","className","position","copyText","input","document","createElement","left","body","appendChild","select","execCommand","removeChild","getScrollTop","pageYOffset","documentElement","scrollTop","getClientHeight","innerHeight","clientHeight","getScrollHeight","scrollHeight"],"mappings":"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","file":"js/chunk-626bbf6e.fea3e684.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/未登录.a0f6edd6.png\";","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"mv-player-page\"},[_c('div',{staticClass:\"nav\"},[_c('i',{staticClass:\"iconfont icon-fanhui\",on:{\"click\":_vm.goBack}}),_c('i',{staticClass:\"iconfont icon-gengduoxiao\"})]),_c('div',{staticClass:\"vdo-content\"},[_c('div',{staticClass:\"vdo-box\"},[_c('video',{ref:\"vdoEl\",staticClass:\"video-ele\",on:{\"click\":_vm.togglePlay,\"play\":_vm.vdoPlay,\"pause\":_vm.vdoPause,\"loadeddata\":_vm.vdoLoadedData,\"timeupdate\":_vm.vdoTimeUpdate,\"error\":_vm.vdoError}})]),_c('transition',{attrs:{\"name\":\"fadeIn\"}},[(_vm.playState === 'paused')?_c('i',{staticClass:\"iconfont icon-bofang2\",on:{\"click\":_vm.togglePlay}}):_vm._e()]),(_vm.vdoInfo.id)?_c('div',{staticClass:\"author-box\"},[_c('div',{staticClass:\"artist\"},[_c('div',{staticClass:\"avatar-box\"},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.vdoInfo.creator.avatarUrl || _vm.defaultImg,\"alt\":\"\"}}),(_vm.vdoInfo.creator.identityIconUrl)?_c('img',{staticClass:\"identityIcon\",attrs:{\"src\":_vm.vdoInfo.creator.identityIconUrl}}):_vm._e()]),_c('div',{staticClass:\"name\"},[_vm._v(\" \"+_vm._s(_vm.vdoInfo.creator.nickname)+\" \")]),_vm._m(0)]),_c('div',{staticClass:\"des-box\"},[_c('div',{staticClass:\"title\",on:{\"click\":_vm.toggleShowDes}},[_c('span',[_vm._v(_vm._s(_vm.vdoInfo.title))]),(_vm.vdoInfo.description && !_vm.showDes)?_c('i',{staticClass:\"iconfont icon-triangle-down\"}):_vm._e(),(_vm.vdoInfo.description && _vm.showDes)?_c('i',{staticClass:\"iconfont icon-triangle-up\"}):_vm._e()]),(_vm.vdoInfo.description && _vm.showDes)?_c('div',{staticClass:\"des\",domProps:{\"innerHTML\":_vm._s(_vm.vdoInfo.description)}}):_vm._e()])]):_vm._e(),(_vm.vdoInfo.id)?_c('div',{staticClass:\"right-bar\"},[_c('div',{staticClass:\"icon-box\"},[_c('i',{staticClass:\"iconfont icon-z-likeFill\"}),_c('p',[_vm._v(_vm._s(_vm._f(\"formatNum\")(_vm.vdoInfo.praisedCount)))])]),_c('div',{staticClass:\"icon-box\"},[_c('i',{staticClass:\"iconfont icon-pinglunpt-wangyiicon\"}),_c('p',[_vm._v(_vm._s(_vm._f(\"formatNum\")(_vm.vdoInfo.commentCount)))])]),_c('div',{staticClass:\"icon-box\"},[_c('i',{staticClass:\"iconfont icon-fenxiangpt\"}),_c('p',[_vm._v(_vm._s(_vm._f(\"formatNum\")(_vm.vdoInfo.shareCount)))])]),_c('div',{staticClass:\"icon-box\"},[_c('i',{staticClass:\"iconfont icon-jia1\"}),_c('p',[_vm._v(_vm._s(_vm._f(\"formatNum\")(_vm.vdoInfo.subscribeCount)))])])]):_vm._e(),_c('div',{staticClass:\"progress-box\"},[_c('van-slider',{attrs:{\"bar-height\":_vm.barHeight,\"button-size\":_vm.buttonSize,\"active-color\":_vm.activeColor,\"inactive-color\":_vm.inActiveColor},on:{\"input\":_vm.progressChange,\"change\":_vm.progressChangeEnd},model:{value:(_vm.progressTime),callback:function ($$v) {_vm.progressTime=$$v},expression:\"progressTime\"}})],1)],1),_vm._m(1)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"follow\"},[_c('i',{staticClass:\"iconfont icon-jiahao\"}),_vm._v(\"关注\")])\n},function (){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"bottom\"},[_c('i',{staticClass:\"iconfont icon-yinle\"}),_c('span',{attrs:{\"lang\":\"\"}},[_vm._v(\"暂无相关音乐!\")])])\n}]\n\nexport { render, staticRenderFns }","import {getMvDetail, getVdoDetail, getMvUrl, getVdoUrl, getMLogtoVideoId} from '@/api/api'\r\nimport { global } from \"@/mixin/global.js\";\r\n\r\nexport default {\r\n  mixins: [global],\r\n  name: 'MvPlayer',\r\n  data() {\r\n    return {\r\n      defaultImg: require('@/assets/mine/未登录.png'),\r\n      vdoInfo: {},\r\n      // showDes: false,\r\n      showDes: false,\r\n      playState: 'paused',\r\n      progressTime: 0,\r\n      activeColor: 'rgba(255, 255, 255, .35)',\r\n      inActiveColor: 'rgba(255, 255, 255, .15)',\r\n      barHeight: '.03rem',\r\n      buttonSize: '.09rem',\r\n    }\r\n  },\r\n  mounted() {\r\n    this.$store.commit(\"changeLoading\", true);\r\n    this.initSet()\r\n  },\r\n  methods: {\r\n    initSet() {\r\n      this.vdoEl = this.$refs.vdoEl\r\n    },\r\n    togglePlay() {\r\n      if (this.vdoEl.paused) {\r\n        this.vdoEl.play()\r\n      } else {\r\n        this.vdoEl.pause()\r\n      }\r\n\r\n    },\r\n    vdoPlay() {\r\n      this.playState = 'playing'\r\n      this.setButton('small')\r\n    },\r\n    vdoPause() {\r\n      this.playState = 'paused'\r\n      this.setButton('big')\r\n    },\r\n    vdoError() {\r\n      console.log('error');\r\n    },\r\n    setButton(type) {\r\n      this.progTimer && clearTimeout(this.progTimer)\r\n      if(type == 'big') {\r\n        this.progTimer = setTimeout(() => {\r\n          this.barHeight = '.03rem'\r\n          this.buttonSize = '.09rem'\r\n        }, 200)\r\n      } else {\r\n        this.progTimer = setTimeout(() => {\r\n          this.barHeight = '.015rem'\r\n          this.buttonSize = '.04rem'\r\n        }, 1000)\r\n      }\r\n    },\r\n    bigButton() {\r\n      this.barHeight = '.03rem'\r\n      this.buttonSize = '.09rem'\r\n      this.progTimer && clearTimeout(this.progTimer)\r\n      this.progTimer = setTimeout(() => {\r\n        this.barHeight = '.015rem'\r\n        this.buttonSize = '.04rem'\r\n      }, 1000)\r\n    },\r\n    vdoTimeUpdate() {\r\n      if (!this.isDrag) {\r\n        this.progressTime = this.vdoEl.currentTime / this.vdoEl.duration * 100\r\n      }\r\n    },\r\n    vdoLoadedData() {\r\n      // console.log(this.vdoEl.videoWidth, this.vdoEl.videoHeight);\r\n      let ratio = this.vdoEl.videoWidth / this.vdoEl.videoHeight\r\n      // 根据比例判断横屏, 竖屏\r\n      if (ratio >= 1) {\r\n        this.vdoEl.style.objectFit = 'contain'\r\n        this.vdoEl.parentElement.style.alignItems = 'center'\r\n      } else {\r\n        this.vdoEl.style.objectFit = 'cover'\r\n        this.vdoEl.parentElement.style.alignItems = 'flex-start'\r\n      }\r\n    },\r\n    progressChange() {\r\n      this.isDrag = true\r\n      this.bigButton()\r\n    },\r\n    progressChangeEnd() {\r\n      this.vdoEl.currentTime = this.progressTime / 100 * this.vdoEl.duration\r\n      if (this.vdoEl.paused) {\r\n        this.vdoEl.play()\r\n      }\r\n      this.isDrag = false\r\n    },\r\n    // 展开/隐藏描述\r\n    toggleShowDes() {\r\n      this.showDes = !this.showDes\r\n    },\r\n    // 获取 type 为 video 的数据\r\n    async videoGetData(newV) {\r\n      // 详细介绍\r\n      let vdoDetailData = await getVdoDetail(newV)\r\n      // console.log(`vdo详情`, vdoDetailData);\r\n\r\n      if (vdoDetailData.code === 200) {\r\n        // this.toast('已获取视频详情')\r\n        this.vdoInfo = {\r\n          id: newV,\r\n          creator: {\r\n            id: vdoDetailData.data.creator.userId,\r\n            nickname: vdoDetailData.data.creator.nickname,\r\n            avatarUrl: vdoDetailData.data.creator.avatarUrl,\r\n            identityIconUrl: vdoDetailData.data.creator.avatarDetail && vdoDetailData.data.creator.avatarDetail.identityIconUrl\r\n          },\r\n          title: vdoDetailData.data.title,\r\n          description: vdoDetailData.data.description && vdoDetailData.data.description.replace(/\\n/g, '<br>'),\r\n          duration: vdoDetailData.data.durationms / 1000,\r\n          commentCount: vdoDetailData.data.commentCount,\r\n          praisedCount: vdoDetailData.data.praisedCount,\r\n          shareCount: vdoDetailData.data.shareCount,\r\n          subscribeCount: vdoDetailData.data.subscribeCount,\r\n        }\r\n      } else {\r\n        this.toast('获取视频详情错误')\r\n      }\r\n\r\n      // 播放地址\r\n      let vdoData = await getVdoUrl(newV)\r\n      // console.log(`vdo地址`, vdoData);\r\n      if (vdoData.code === 200) {\r\n        this.vdoInfo.url = vdoData.urls[0].url\r\n      } else {\r\n        this.toast(`获取播放地址错误`)\r\n      }\r\n      // console.log(JSON.stringify(this.vdoInfo, null, '  '));\r\n      this.$nextTick(() => {\r\n        this.$refs.vdoEl.setAttribute('src', this.vdoInfo.url)\r\n        this.$refs.vdoEl.play()\r\n      })\r\n\r\n      this.$store.commit(\"changeLoading\", false);\r\n    },\r\n    async mvGetData(newV) {\r\n      // 详细介绍\r\n      let mvDetailData = await getMvDetail(newV)\r\n      if (mvDetailData.code === 200) {\r\n        // this.toast('已获取视频详情')\r\n        this.vdoInfo = {\r\n          id: newV,\r\n          creator: {\r\n            id: mvDetailData.data.artists[0].id,\r\n            nickname: mvDetailData.data.artists[0].name,\r\n            avatarUrl: mvDetailData.data.artists[0].img1v1Url || mvDetailData.data.cover,\r\n          },\r\n          title: mvDetailData.data.name,\r\n          description: mvDetailData.data.desc && mvDetailData.data.desc.replace(/\\n/g, '<br>'),\r\n          duration: mvDetailData.data.duration / 1000,\r\n          commentCount: mvDetailData.data.commentCount,\r\n          praisedCount: mvDetailData.data.subCount,\r\n          shareCount: mvDetailData.data.shareCount,\r\n          subscribeCount: mvDetailData.data.subCount\r\n        }\r\n      } else {\r\n        this.toast('获取视频详情错误')\r\n      }\r\n\r\n      // 播放地址\r\n      let mvData = await getMvUrl(newV, 1080)\r\n      // console.log(`mv地址`, mvData);\r\n      if (mvData.code === 200) {\r\n        this.vdoInfo.url = mvData.data.url\r\n      } else {\r\n        this.toast(`获取播放地址错误`)\r\n      }\r\n      // console.log(JSON.stringify(this.vdoInfo, null, '  '));\r\n      this.$nextTick(() => {\r\n        this.$refs.vdoEl.setAttribute('src', this.vdoInfo.url)\r\n        this.$refs.vdoEl.play()\r\n      })\r\n\r\n      this.$store.commit(\"changeLoading\", false);\r\n    },\r\n    async mlogGetData(newV) {\r\n      let data = await getMLogtoVideoId(newV)\r\n      console.log(data);\r\n      if (data.code === 200) {\r\n        this.videoGetData(data.data)\r\n      } else {\r\n        this.toast('获取mlog错误! 该链接无法播放!', 3000)\r\n        this.$store.commit(\"changeLoading\", false);\r\n        throw '获取mlog错误! 该链接可能无法播放!'\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    '$route.params.id': {\r\n      handler: function (newV) {\r\n        try {\r\n          this.$store.commit(\"changeLoading\", true);\r\n          // 不同类型发起不同请求 type mv video, 再提取需要的数据\r\n          let type = this.$route.query.type\r\n          // this.vdoInfo = {}\r\n          // console.log(`id 触发 ${newV} 类型 ${type}  正在发起请求`);\r\n          if (type === 'mv') {\r\n            this.mvGetData(newV)\r\n          } else if (type === 'video') {\r\n            this.videoGetData(newV)\r\n          } else if (type === 'mlog') {\r\n            this.mlogGetData(newV)\r\n          }\r\n        } catch (error) {\r\n          console.log('获取必要信息错误!');\r\n          this.toast('获取必要信息错误', 2000)\r\n        } finally {\r\n          this.$store.commit(\"changeLoading\", false);\r\n        }\r\n      },\r\n      immediate: true\r\n    }\r\n  }\r\n}","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/eslint-loader/index.js??ref--14-0!./MvPlayer.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/eslint-loader/index.js??ref--14-0!./MvPlayer.js?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MvPlayer.vue?vue&type=template&id=7a7c4a38&scoped=true&\"\nimport script from \"./MvPlayer.js?vue&type=script&lang=js&\"\nexport * from \"./MvPlayer.js?vue&type=script&lang=js&\"\nimport style0 from \"./MvPlayer.scss?vue&type=style&index=0&id=7a7c4a38&prod&lang=scss&scoped=true&\"\nimport style1 from \"./MvPlayer.vue?vue&type=style&index=1&id=7a7c4a38&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7a7c4a38\",\n  null\n  \n)\n\nexport default component.exports","// 一些在组件共用的属性, 函数\r\n\r\nimport { songDetail, songUrl } from '@/api/api'\r\nexport let global = {\r\n  data() {\r\n    return {};\r\n  },\r\n  computed: {\r\n    // 获取登录状态\r\n    loginStatus() {\r\n      return this.$store.getters.loginStatus;\r\n    },\r\n    playerPlayList() {\r\n      return this.$store.getters.playList\r\n    },\r\n    adoEl() {\r\n      return this.$store.getters.adoEl\r\n    },\r\n    songId() {\r\n      return this.$store.getters.songId\r\n    }\r\n  },\r\n  methods: {\r\n    // 去登录\r\n    goLogin() {\r\n      !this.loginStatus && this.$router.push({ name: \"Login\" });\r\n    },\r\n    // 退出登录\r\n    logout() {\r\n      this.$store.dispatch(\"userLogout\");\r\n    },\r\n    // 菜单显示/隐藏\r\n    toggleMenu() {\r\n      this.$store.commit(\"toggleMenu\");\r\n    },\r\n    // http://localhost:8080\r\n    // 路由返回, 如果第一次进入的页面有导航返回键, go(-1), 是无效的, 把访问过的路由记录到 vuex, 只有一个路由还点了返回键, 就直接跳到首页\r\n    goBack() {\r\n      let history = this.$store.getters.historyList\r\n      if (history.length > 1) {\r\n        this.$router.go(-1);\r\n      } else {\r\n        this.$router.push({name: 'Find'})\r\n      }\r\n    },\r\n    // 点击菜单字体图标\r\n    clickMenu() {\r\n      console.log(\"点击了菜单\");\r\n    },\r\n    // 去搜索\r\n    goSearch() {\r\n      // console.log(\"前往搜索页\");\r\n      this.$router.push({name: 'Search'})\r\n    },\r\n    // 返回顶部\r\n    toTop() {\r\n      window.scroll({ top: 0, behavior: 'smooth'})\r\n    },\r\n    // 前往 歌单\r\n    goPlaylist(id) {\r\n      console.log(\"点击歌单:\", id);\r\n      this.$router.push({ name: \"PlayListDetail\", params: { id } });\r\n    },\r\n    async clickSong(id) {\r\n      // console.log('点击歌曲', id);\r\n      // http://localhost:8080/#/Home/Find\r\n      this.$store.commit('changeSongId', String(id))\r\n      let history = this.$store.getters.historyList\r\n      if (history.length <= 1 && !window.location.href.includes('?player=show')) {\r\n        window.location.href+='?player=show'\r\n      }\r\n      this.$store.commit('changeShowPlayer', true)\r\n    },\r\n    clickMvIcon(id, type=\"mv\") {\r\n      this.$store.commit('changeMvId', Number(id))\r\n      this.$router.push({name: 'MvPlayer', params: {id}, query: {type}})\r\n    },\r\n    // toast 提示\r\n    toast(msg, durationT = 1500) {\r\n      this.$toast({\r\n        message: msg,\r\n        className: \"playerToast\", duration: durationT, position: \"bottom\",\r\n      });\r\n    },\r\n    // 复制文本 value \r\n    copyText(value) {\r\n      // 创建的input需要加到 body, 不然复制不到值\r\n      let input = document.createElement('input')\r\n      input.value = value\r\n      input.style.position = 'absolute'\r\n      input.style.left = '-10000px'\r\n      input.style.top = '-10000px'\r\n      document.body.appendChild(input)\r\n      input.select()\r\n      document.execCommand('copy')\r\n      this.toast('复制成功! 快和小伙伴们分享吧!')\r\n      document.body.removeChild(input)\r\n    },\r\n    // 已滚动高度\r\n    getScrollTop() {\r\n      return (\r\n        window.pageYOffset ||\r\n        document.documentElement.scrollTop ||\r\n        document.body.scrollTop ||\r\n        0\r\n      );\r\n    },\r\n    // 窗口可视高度\r\n    getClientHeight() {\r\n      return (\r\n        window.innerHeight ||\r\n        document.documentElement.clientHeight ||\r\n        document.body.clientHeight ||\r\n        0\r\n      );\r\n    },\r\n    // 获取已滚动高度\r\n    getScrollHeight() {\r\n      return document.body.scrollHeight || document.documentElement.scrollHeight\r\n    }\r\n  },\r\n};\r\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!./MvPlayer.scss?vue&type=style&index=0&id=7a7c4a38&prod&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MvPlayer.vue?vue&type=style&index=1&id=7a7c4a38&prod&lang=scss&\""],"sourceRoot":""}